{{ define "main" }}
<article class="post-content" itemscope itemtype="https://schema.org/BlogPosting" data-pagefind-body>
    <header class="post-header">
        <h1 class="post-title" itemprop="headline">{{ .Title }}</h1>
        <div class="post-meta">
            <time datetime="{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}" itemprop="datePublished">
                {{ .Date.Format "Jan 2, 2006" }}
            </time>
            <span class="post-meta-separator">•</span>
            <span>{{ .ReadingTime }} min read</span>
            {{- if .Params.categories }}
            <span class="post-meta-separator">•</span>
            {{- range $index, $category := .Params.categories }}
                {{- if $index }}, {{ end }}
                <a href="{{ "/categories/" | relURL }}{{ $category | urlize }}" class="post-category-link">{{ $category }}</a>
            {{- end }}
            {{- end }}
        </div>
        {{- if .Description }}
        <div class="post-description" itemprop="description">
            {{ .Description }}
        </div>
        {{- end }}
    </header>

    <nav class="reading-rail" id="reading-rail" data-reader-ignore hidden aria-label="Section navigation">
        <div class="reading-rail-lines" id="reading-rail-lines"></div>
        <div class="reading-rail-tooltip" id="reading-rail-tooltip" aria-hidden="true">
            <span class="reading-rail-tooltip-index" id="reading-rail-tooltip-index"></span>
            <span class="reading-rail-tooltip-title" id="reading-rail-tooltip-title"></span>
            <span class="reading-rail-tooltip-meta" id="reading-rail-tooltip-meta"></span>
        </div>
    </nav>

    <div class="post-layout">
        <div class="post-main">
            <div class="content" itemprop="articleBody">
                {{ .Content }}
            </div>
        </div>
    </div>
    
    <!-- Author bio -->
    <div>
        {{ partial "author-bio.html" . }}
    </div>
    
    <!-- Tags -->
    {{- if .Params.tags }}
    <div class="post-tags post-section post-divider">
        <h3 class="post-tags-title">Tagged with:</h3>
        <div class="post-tags-list">
            {{- range .Params.tags }}
            <a href="{{ "/tags/" | relURL }}{{ . | urlize }}" class="post-tag">
                #{{ . }}
            </a>
            {{- end }}
        </div>
    </div>
    {{- end }}
    
    <!-- Related Posts -->
    <div>
        {{ partial "related-posts.html" . }}
    </div>
    
    <!-- Newsletter Signup -->
    <div>
        {{ partial "newsletter.html" . }}
    </div>
    
    <!-- Social sharing -->
    <div class="social-sharing post-section post-divider text-center">
        <h3 class="social-sharing-title">Share this post:</h3>
        <div class="social-sharing-buttons">
            <a href="https://twitter.com/intent/tweet?url={{ .Permalink }}&text={{ .Title }}&via={{ .Site.Params.twitter | strings.TrimPrefix "@" }}" 
               target="_blank" rel="noopener noreferrer" class="social-button social-button-twitter">
                Share on Twitter
            </a>
            <a href="https://www.linkedin.com/sharing/share-offsite/?url={{ .Permalink }}" 
               target="_blank" rel="noopener noreferrer" class="social-button social-button-linkedin">
                Share on LinkedIn
            </a>
        </div>
    </div>
    
    <!-- Navigation to other posts -->
    <nav class="post-navigation post-section post-divider">
        <div class="post-navigation-container">
            {{- if .PrevInSection }}
            <div class="post-nav-item post-nav-prev">
                <p class="post-nav-label">Previous Post</p>
                <a href="{{ .PrevInSection.RelPermalink }}" class="post-nav-link">
                    {{ .PrevInSection.Title }}
                </a>
            </div>
            {{- end }}
            {{- if .NextInSection }}
            <div class="post-nav-item post-nav-next">
                <p class="post-nav-label">Next Post</p>
                <a href="{{ .NextInSection.RelPermalink }}" class="post-nav-link">
                    {{ .NextInSection.Title }}
                </a>
            </div>
            {{- end }}
        </div>
    </nav>
    
    <!-- Comments -->
    <div>
        {{ partial "comments.html" . }}
    </div>
</article>
{{ end }}
